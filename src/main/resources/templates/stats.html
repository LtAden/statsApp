<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Stats</title>
    <script>
        function addStat() {
            const name = prompt("Enter the name of the new stat:");
            if (name) {
                const form = document.createElement("form");
                form.method = "post";
                form.action = "/add";

                const input = document.createElement("input");
                input.type = "hidden";
                input.name = "statName";
                input.value = name;

                form.appendChild(input);
                document.body.appendChild(form);
                form.submit();
            }
        }
    </script>
</head>
<body>
<h1>Stats</h1>
<div>
<table>
    <tr>
        <th>Name</th>
        <th>Count</th>
        <th>Increment</th>
        <th>Add Custom Amount</th>
        <th>Buttons</th>
    </tr>
    <tr th:each="entry : ${stats}">
        <td th:text="${entry.key}"></td>
        <td th:text="${entry.value.count}"></td>
        <td>
            <form th:action="@{/increment}" method="post" style="display: inline;">
                <input type="hidden" name="statName" th:value="${entry.key}" />
                <button type="submit">+1</button>
            </form>
        </td>
        <td>
            <form th:action="@{/addCustomAmount}" method="post" style="display: inline;">
                <input type="hidden" name="statName" th:value="${entry.key}" />
                <input type="number" name="count" value="" required />
                <button type="submit">Add Amount</button>
            </form>
        </td>
        <td>
            <form th:action="@{/archive}" method="post" style="display: inline;">
                <input type="hidden" name="statName" th:value="${entry.key}" />
                <button type="submit">Archive stat</button>
            </form>
        </td>
    </tr>
</table>
    <button onclick="addStat()">Add New Stat</button>
</div>
<h2>Archive</h2>
<div>
    <table>
        <tr>
            <th>Name</th>
            <th>Count</th>
        </tr>
        <tr th:each="entry : ${archive}">
            <td th:text="${entry.key}"></td>
            <td th:text="${entry.value.count}"></td>
        </tr>
    </table>
</div>
</body>
</html>